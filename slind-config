# slind autobuilder configuration file
######################################

MIRROR=http://tux/pub/debian
DEBSUITE=etch
TARGET=dev-chroot
ROOTCMD=sudo

# (debian names of) architectures we're building for
ARCHES="powerpc arm mips mipsel sh4a uclibc-mips uclibc-mipsel uclibc-powerpc uclibc-i386 uclibc-arm uclibc-sh4a"
# address of the remote repository which hosts host tools
SLIND_REPO=http://ftp.slind.org/pub/SLIND
SUITE=clydesdale
TARGET_APT="syslogd joe openssh-server udhcpd"

# explicit grasp config
GITBASE_URL="http://git.slind.org/gitrepos/"
GITREPOS_DIR=/build/grasp-repos
TARBALLS_DIR=/build/grasp-tarballs
GRASP_REPO=/build/grasp-out

# path to repository inside chroot
REPODIR="$GRASP_REPO"

# set this to contain environment variables you want to set
# inside chroot
# CHROOTENV="env http_proxy=http://localhost:3128 SETNJOBS=48 USENJOBS=48"

# command that delivers built packages to repository
# (you don't want to change this)
DELIVERCMD=pool-injectdeb

# hooks for 'slindctl maintainer-build' command
# all default to 'do nothing'
# PRE_SLINDJOB_HOOK=pre_slindjob
# POST_SLINDJOB_HOOK=post_slindjob
# pre_slindjob() {
# 	set -x
# 	echo "I am PRE_SLINDJOB_HOOK!"
# 	mkdir -p "$TARGET/$GRASP_REPO/indices"
# 
# 	rm -rf "$TARGET/$GITREPOS_DIR"
# 	rm -rf "$TARGET/$TARBALLS_DIR"
# 	rm -rf "$TARGET/$GRASP_REPO"
# 	cp -a ~/grasp-repos "$TARGET/$GITREPOS_DIR"
# 	cp -a ~/grasp-tarballs "$TARGET/$TARBALLS_DIR"
# 	cp -a ~/grasp-out "$TARGET/$GRASP_REPO"
# 	set +x
# }
# 
# post_slindjob() {
# 	set -x
# 	echo "I am POST_SLINDJOB_HOOK!"
# 
# 	rm -rf ~/grasp-repos
# 	rm -rf ~/grasp-tarballs
# 	rm -rf ~/grasp-out
# 	cp -a "$TARGET/$GITREPOS_DIR" ~/grasp-repos
# 	cp -a "$TARGET/$TARBALLS_DIR" ~/grasp-tarballs
# 	cp -a "$TARGET/$GRASP_REPO" ~/grasp-out
# 	set +x
# }

